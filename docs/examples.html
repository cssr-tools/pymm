<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Examples &mdash; pymm  documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/sphinx_highlight.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="author" title="About these documents" href="about.html" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="pymm Python API" href="api.html" />
    <link rel="prev" title="Configuration file" href="configuration_file.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #aaaaaa" >
            <a href="index.html">
            <img src="_static/pymm_logo.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="configuration_file.html">Configuration file</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Examples</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#image">Image</a></li>
<li class="toctree-l2"><a class="reference internal" href="#device">Device</a></li>
<li class="toctree-l2"><a class="reference internal" href="#online">Online</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="api.html">pymm Python API</a></li>
<li class="toctree-l1"><a class="reference internal" href="output_folder.html">Output folder</a></li>
<li class="toctree-l1"><a class="reference internal" href="about.html">About pymm</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: #aaaaaa" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">pymm</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
      <li>Examples</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/examples.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="examples">
<h1>Examples<a class="headerlink" href="#examples" title="Permalink to this heading"></a></h1>
<section id="image">
<h2>Image<a class="headerlink" href="#image" title="Permalink to this heading"></a></h2>
<p>In this example we consider the micromodel described in the
<a class="reference internal" href="configuration_file.html"><span class="doc">configuration file</span></a> section.</p>
<p>The image is available in the examples folder in the <a class="reference external" href="https://github.com/daavid00/pymm">Github page</a>
with the default name ‘microsystem.png’. The configuration file corresponds to the one in the
<a class="reference internal" href="configuration_file.html"><span class="doc">configuration file</span></a> section and it is saved as ‘parameters.txt’
(the default name for the configuration file). Since ‘image’ is the default entry for the simulation
setup (i.e., the flow is from top to bottom), and assuming that the command ‘gmsh’ in the terminal
executes Gmsh, then to run the whole framework (meshing, flow, and tracer) it is enough to add the
‘-t all’ command line to the pymm executable:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pymm -t all
</pre></div>
</div>
<p>The execution time was ca. 20 minutes and the following are screenshots of the simulation results:</p>
<figure class="align-default">
<img alt="_images/pressure.png" src="_images/pressure.png" />
</figure>
<figure class="align-default">
<img alt="_images/velocity.png" src="_images/velocity.png" />
</figure>
<figure class="align-default" id="id1">
<img alt="_images/tracer.png" src="_images/tracer.png" />
<figcaption>
<p><span class="caption-text">Simulation results of the (top) pressure, (middle) velocity, and (bottom) tracer concentration.</span><a class="headerlink" href="#id1" title="Permalink to this image"></a></p>
</figcaption>
</figure>
</section>
<section id="device">
<h2>Device<a class="headerlink" href="#device" title="Permalink to this heading"></a></h2>
<p>Here we consider the same image and configuration file as in the
<a class="reference internal" href="image.html"><span class="doc">Image example</span></a>, but we are interested now on the
device setup (the flow is from the top-left corner to the bottom-right
corner of the device). Then we add the corresponding flag to the <strong>pymm</strong>
executable:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pymm -t all -m device
</pre></div>
</div>
<p>The execution time was ca. 35 minutes and the following are screenshots of the simulation results:</p>
<figure class="align-default">
<img alt="_images/device_pressure.png" src="_images/device_pressure.png" />
</figure>
<figure class="align-default">
<img alt="_images/device_velocity.png" src="_images/device_velocity.png" />
</figure>
<figure class="align-default" id="id2">
<img alt="_images/device_tracer.png" src="_images/device_tracer.png" />
<figcaption>
<p><span class="caption-text">Simulation results of the (top) pressure, (middle) velocity, and (bottom) tracer concentration.</span><a class="headerlink" href="#id2" title="Permalink to this image"></a></p>
</figcaption>
</figure>
</section>
<section id="online">
<h2>Online<a class="headerlink" href="#online" title="Permalink to this heading"></a></h2>
<p>In this example we consider a micromodel available online in Fig. 2a in
<a class="reference external" href="https://agupubs.onlinelibrary.wiley.com/doi/full/10.1029/2007WR006641">Joekar-Niasar et al. 2009</a>.</p>
<p>The image was extracted by screenshot and saved with the name ‘online.png’ (1068x1068 pixels).
The configuration file was saved as ‘configuration.txt’ and contained the following text:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="sd">&quot;&quot;&quot;Set the framework parameters&quot;&quot;&quot;</span>
<span class="linenos"> 2</span><span class="mf">600e-6</span>      <span class="c1">#Image-related, length of the microsystem [m]</span>
<span class="linenos"> 3</span><span class="mf">600e-6</span>      <span class="c1">#Image-related, height of the microsystem [m]</span>
<span class="linenos"> 4</span><span class="mf">1.8e-6</span>      <span class="c1">#Image-related, depth of the microsystem [m]</span>
<span class="linenos"> 5</span><span class="mi">160</span>         <span class="c1">#Image-related, threshold for converting the image to binary</span>
<span class="linenos"> 6</span><span class="mf">1.0</span>         <span class="c1">#Image-related, rescaled factor for the input image</span>
<span class="linenos"> 7</span><span class="mi">50</span>          <span class="c1">#Image-related, minimum size of the grain clusters</span>
<span class="linenos"> 8</span><span class="mf">1.0</span>         <span class="c1">#Image-related, tolerance to approximate the border as polygon</span>
<span class="linenos"> 9</span><span class="mf">1.0</span>         <span class="c1">#Image-related, tolerance to approximate the grains as polygon</span>
<span class="linenos">10</span><span class="mf">1.0</span>         <span class="c1">#Figure-related, line width to show the contours in the produced figures</span>
<span class="linenos">11</span><span class="mf">6e-6</span>        <span class="c1">#Device-related, width of the top and bottom channels in the micromodel device [m]</span>
<span class="linenos">12</span><span class="mf">1e-6</span>        <span class="c1">#Mesh-related, mesh size [m]</span>
<span class="linenos">13</span><span class="mf">1e-6</span>        <span class="c1">#Fluid-related, kinematic viscosity [Dynamic viscosity/fluid_density, m2/s]</span>
<span class="linenos">14</span><span class="mf">1e-12</span>       <span class="c1">#Tracer-related, diffusion coefficient [m2/s]</span>
<span class="linenos">15</span><span class="mf">2.0e-3</span>      <span class="c1">#Simulation-related, inlet boundary condition (Pressure/fluid_density, [Pa/(kg/m3)])</span>
<span class="linenos">16</span><span class="mf">120.0</span>       <span class="c1">#Simulation-related, end time for the tracer simulation [s]</span>
<span class="linenos">17</span><span class="mf">1.0</span>         <span class="c1">#Simulation-related, time interval to write the tracer results [s]</span>
<span class="linenos">18</span><span class="mf">1e-7</span>        <span class="c1">#Solver-related, convergence criterium for the pressure solution in the numerical scheme for the Stokes simulation</span>
<span class="linenos">19</span><span class="mf">1e-8</span>        <span class="c1">#Solver-related, convergence criterium for the velocity solution in the numerical scheme for the Stokes simulation</span>
<span class="linenos">20</span><span class="mi">10000</span>       <span class="c1">#Solver-related, maximum number of iterations for the Stokes simulation in case the convergence criteria have not been reached</span>
<span class="linenos">21</span><span class="mf">1.0</span>         <span class="c1">#Solver-related, time step in the numerical scheme for the Tracer simulation [s]</span>
</pre></div>
</div>
<p>Here we used a version of Gmsh built from source, then we gave the path to the executable via the ‘-g’ flag.
Since we are interested in the flow and tracer simulations, then we add the flag ‘-t all’.
Then, the following command was exectued in the terminal:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pymm -i online.png -p configuration.txt -m device -t all -gmsh /home/AD.NORCERESEARCH.NO/dmar/Github/gmsh/build/gmsh
</pre></div>
</div>
<p>The execution time was ca. 15 minutes and the following are screenshots of the simulation results:</p>
<figure class="align-default">
<img alt="_images/online_pressure.png" src="_images/online_pressure.png" />
</figure>
<figure class="align-default">
<img alt="_images/online_velocity.png" src="_images/online_velocity.png" />
</figure>
<figure class="align-default" id="id3">
<img alt="_images/online_tracer.png" src="_images/online_tracer.png" />
<figcaption>
<p><span class="caption-text">Simulation results of the (top) pressure, (middle) velocity, and (bottom) tracer concentration.</span><a class="headerlink" href="#id3" title="Permalink to this image"></a></p>
</figcaption>
</figure>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="configuration_file.html" class="btn btn-neutral float-left" title="Configuration file" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="api.html" class="btn btn-neutral float-right" title="pymm Python API" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, NORCE Norwegian Research Centre AS.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>